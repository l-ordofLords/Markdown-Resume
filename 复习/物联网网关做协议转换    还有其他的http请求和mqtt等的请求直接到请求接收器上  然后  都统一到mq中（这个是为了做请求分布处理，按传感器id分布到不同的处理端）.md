物联网网关做协议转换    还有其他的http请求和mqtt等的请求直接到请求接收器上  然后  都统一到mq中。

有多个消费者怎么处理  先关闭ack自动确认 然后进行ack手动确认  自动确认会导致被多个消费者重复消费

为什么自动确认会被重复消费

怎么保证消息不丢失

分段确认  生产者 先开启confirm机制  成功和失败都会触发回调（超时没收到回调可以进行重发，重发的这个怎么确认不被重复消费，消费者消费的时候会确认数据的传感器id和数据时间，如果这俩一致不会消费）  然后在回调中进行处理

然后  消费者先关闭ack自动确认  再进行手动确认

让某些传感器消息分布到固定的消费者中

出一个exchange  有几个消费者创建几个队列   然后生产者往消息队列发消息的时候按传感器id范围生成固定的几个Routing Key，这样就是固定的消费者消费固定传感器范围的消息了

消息持久化

防止消息队列荡了消息没了，做了消息的持久化   创建持久化的队列和交换器

发消息的时候deliveryMode=2来让消息持久化  （主从队列可以这样玩，就一个队列，消息都过不来了，就补之前一段的消息也没啥意思）持久化的消息，人工确认里面的数据怎么补（一般都不补了，如果有传感器断线警报就手动处理，原因为网络或设备问题，传感器数据量大，价值低没啥补的必要，客户特别要求的情况下，也可以补，有固定的接口）

rabbitmq高可用  可以用镜像队列来做  

